//-----------------------------------------------------------------------------
/*

Solids built with Bezier Curves

*/
//-----------------------------------------------------------------------------

package main

import . "github.com/deadsy/sdfx/sdf"

//-----------------------------------------------------------------------------

func bowling_pin() {
	b := NewBezier()
	b.Add(0, 0)
	b.Add(2.031/2.0, 0).HandleFwd(DtoR(45), 2)
	b.Add(4.766/2.0, 4.5).Handle(DtoR(90), 2, 2)
	b.Add(1.797/2.0, 10).Handle(DtoR(90), 3, 3)
	b.Add(2.547/2.0, 13.5).Handle(DtoR(90), 1, 1)
	b.Add(0, 15).HandleRev(DtoR(0), 1)
	b.Close()

	p := b.Polygon()
	s0 := Polygon2D(p.Vertices())
	s1 := Revolve3D(s0)
	RenderSTL(s1, 300, "bowlingpin.stl")
}

//-----------------------------------------------------------------------------

func egg1() {
	b := NewBezier()
	b.Add(0, 0).HandleFwd(DtoR(0), 10)
	b.Add(0, 16).HandleRev(DtoR(0), 5)
	b.Close()

	p := b.Polygon()
	s0 := Polygon2D(p.Vertices())
	s1 := Revolve3D(s0)
	RenderSTL(s1, 300, "egg1.stl")
}

//-----------------------------------------------------------------------------

func egg2() {
	h := 8.0
	r := 2.5

	b := NewBezier()
	b.Add(0, 0).HandleFwd(DtoR(0), r/2)
	b.Add(r, 0.4*h).Handle(DtoR(90), 0.7*r, 0.7*r)
	b.Add(0, h).HandleRev(DtoR(0), r/3)
	b.Close()

	p := b.Polygon()
	s0 := Polygon2D(p.Vertices())
	s1 := Revolve3D(s0)
	RenderSTL(s1, 300, "egg2.stl")
}

//-----------------------------------------------------------------------------

func bowl() {
	b := NewBezier()
	b.Add(1.428570, 0.000000)
	b.Add(194.311790, 1.616000).Mid()
	b.Add(424.623890, -2.388090).Mid()
	b.Add(584.285710, 98.571430)
	b.Add(730.711690, 191.161470).Mid()
	b.Add(845.816870, 372.034250).Mid()
	b.Add(850.576860, 545.337880)
	b.Add(855.789270, 735.113020).Mid()
	b.Add(679.478190, 877.171053).Mid()
	b.Add(586.270181, 1049.835600)
	b.Add(562.176808, 1094.467720).Mid()
	b.Add(551.662561, 1169.752600).Mid()
	b.Add(530.555895, 1191.428570)
	b.Add(506.830592, 1215.793810).Mid()
	b.Add(461.351740, 1202.110070).Mid()
	b.Add(444.285710, 1178.571430)
	b.Add(414.233090, 1137.120790).Mid()
	b.Add(452.788480, 1075.361930).Mid()
	b.Add(470.000000, 1027.142850)
	b.Add(531.988775, 853.477662).Mid()
	b.Add(743.353570, 724.365420).Mid()
	b.Add(743.662950, 546.384650)
	b.Add(743.899310, 410.411750).Mid()
	b.Add(648.722298, 272.112130).Mid()
	b.Add(536.903859, 194.747260)
	b.Add(387.543410, 91.407850).Mid()
	b.Add(0.000000, 101.890120).Mid()
	b.Add(0.000000, 101.890120)
	b.Close()

	p := b.Polygon()
	s0 := Polygon2D(p.Vertices())
	s1 := RevolveTheta3D(s0, DtoR(270))
	RenderSTL(s1, 300, "bowl.stl")
}

//-----------------------------------------------------------------------------

func vase() {
	b := NewBezier()
	b.Add(0.357140, 0.000000)
	b.Add(286.591374, 0.000000)
	b.Add(286.591374, 0.000000).Mid()
	b.Add(438.180430, 405.704940).Mid()
	b.Add(438.180430, 599.667510)
	b.Add(438.180430, 747.833392).Mid()
	b.Add(340.551300, 912.588850).Mid()
	b.Add(326.785720, 937.142860)
	b.Add(313.020136, 961.696870).Mid()
	b.Add(289.271359, 1007.535800).Mid()
	b.Add(283.928573, 1025.714290)
	b.Add(278.585786, 1043.892790).Mid()
	b.Add(279.638315, 1091.954510).Mid()
	b.Add(254.642859, 1045.714290)
	b.Add(229.647403, 999.474070).Mid()
	b.Add(259.847631, 950.274470).Mid()
	b.Add(291.785716, 902.142860)
	b.Add(348.012060, 817.408149).Mid()
	b.Add(405.357150, 762.993097).Mid()
	b.Add(405.357150, 667.857140)
	b.Add(405.357150, 510.752570).Mid()
	b.Add(371.256950, 100.000000).Mid()
	b.Add(208.928573, 100.000000)
	b.Add(139.284800, 100.000000).Mid()
	b.Add(0.000000, 98.928570).Mid()
	b.Add(0.000000, 98.928570)
	b.Close()

	p := b.Polygon()
	s0 := Polygon2D(p.Vertices())
	s1 := Revolve3D(s0)
	RenderSTL(s1, 300, "vase.stl")
}

//-----------------------------------------------------------------------------

func main() {
	bowling_pin()
	bowl()
	vase()
	egg1()
	egg2()
}

//-----------------------------------------------------------------------------
